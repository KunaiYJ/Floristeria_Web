function eventListener(){const e=document.querySelector(".mobile-menu");e&&e.addEventListener("click",navegacionResponsive);const t=document.querySelectorAll('input[name="contacto[contacto]"]');t.length>0&&t.forEach(e=>e.addEventListener("click",mostrarMetodosContacto))}function mostrarMetodosContacto(e){const t=document.querySelector("#contacto");"telefono"==e.target.value?t.innerHTML='\n            <label for="telefono">Número de teléfono: </label>\n            <input type="tel" placeholder="Tu número telefónico" id="telefono" name="contacto[telefono]" required>\n\n            <p>Elija la fecha y la hora para la llamada</p>\n\n            <label for="fecha">Fecha: </label>\n            <input type="date" id="fecha" name="contacto[fecha]" required>\n\n            <label for="hora">Hora: </label>\n            <input type="time" id="hora" min="09:00" max="18:00" name="contacto[hora]" required>\n        ':t.innerHTML='\n            <label for="email">Correo electrónico: </label>\n            <input type="email" placeholder="Tu correo electrónico" id="email" name="contacto[email]" required>\n        '}function abrirModal(e,t,n){document.getElementById("modal-inventario").style.display="flex",document.getElementById("id_producto_modal").value=e,document.getElementById("cantidad_flores").value="",document.getElementById("stock").value=""}function cerrarModal(){document.getElementById("modal-inventario").style.display="none"}document.addEventListener("DOMContentLoaded",(function(){eventListener()})),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("inputBusqueda"),t=document.querySelectorAll(".table__tbody .table__tr");e.addEventListener("input",(function(){const n=e.value.toLowerCase();t.forEach(e=>{e.textContent.toLowerCase().includes(n)?e.style.display="":e.style.display="none"})}))})),document.addEventListener("DOMContentLoaded",(function(){var e,t=document.getElementById("calendar1"),n=document.getElementById("pedidoModal"),o=document.querySelector(".close-pedido"),a=document.getElementById("inputBusqueda");n.style.display="none",t&&(e=new FullCalendar.Calendar(t,{initialView:"dayGridMonth",locale:"es",events:"/admin/pedidos/obtener_pedidos",eventClick:function(e){document.getElementById("modalNombreCliente").innerText=e.event.extendedProps.cliente||"No especificado",document.getElementById("modalProducto").innerText=e.event.title||"No especificado",document.getElementById("modalFechaEntrega").innerText=e.event.start?e.event.start.toISOString().split("T")[0]:"No especificada",document.getElementById("modalDireccion").innerText=e.event.extendedProps.direccion||"No especificada",document.getElementById("modalContacto").innerText=e.event.extendedProps.contacto||"No especificado",document.getElementById("pedidoId").value=e.event.id,document.getElementById("modalEstado").value=e.event.extendedProps.estado||"Pendiente","pedidoUsuario"===e.event.extendedProps.tipo?(document.querySelector("#actualizarEstadoForm").style.display="none",document.querySelector("#actualizarEstadoTitulo").style.display="none"):(document.querySelector("#actualizarEstadoForm").style.display="block",document.querySelector("#actualizarEstadoTitulo").style.display="block"),n.style.display="flex"},eventClassNames:function(e){if("pedidoUsuario"===e.event.extendedProps.tipo)return["pedido-usuario"];var t=e.event.extendedProps.estado;return"Pendiente"===t?["pendiente"]:"Pagado"===t?["pagado"]:["terminado"]}})).render(),a.addEventListener("input",(function(){var t=this.value.toLowerCase();e.getEvents().forEach((function(e){var n=e.title.toLowerCase(),o=e.extendedProps.cliente?e.extendedProps.cliente.toLowerCase():"";n.includes(t)||o.includes(t)?e.setProp("display","auto"):e.setProp("display","none")}))})),o&&(o.onclick=function(){n.style.display="none"}),window.onclick=function(e){e.target===n&&(n.style.display="none")},document.getElementById("actualizarEstadoForm").addEventListener("submit",(function(t){t.preventDefault();var o=new FormData(this);fetch(this.action,{method:"POST",body:o}).then(e=>e.json()).then(t=>{t.success?(e.refetchEvents(),n.style.display="none"):alert("Hubo un problema al actualizar el estado")}).catch(e=>console.error("Error:",e))}))})),function(){const e=document.querySelector("#tags_input");if(e){const a=document.querySelector("#tags"),d=document.querySelector('[name="tags"]');let c=[];function t(){a.textContent="",c.forEach(e=>{const t=document.createElement("LI");t.classList.add("formulario__tag"),t.textContent=e,t.ondblclick=n,a.appendChild(t)}),o()}function n(e){e.target.remove(),c=c.filter(t=>t!==e.target.textContent),o()}function o(){d.value=c.join(", ")}""!==d.value&&(c=d.value.split(","),t()),e.addEventListener("keypress",(function(n){if(","===n.key){if(""===n.target.value.trim()||c.includes(n.target.value.trim()))return void n.preventDefault();n.preventDefault(),c.push(n.target.value.trim()),e.value="",t()}}))}}(),window.onclick=function(e){e.target==document.getElementById("modal-inventario")&&cerrarModal()},document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".ventas-productos"),t=document.querySelector(".ventas-productos-seleccionados"),n=document.getElementById("totalDisplay"),o=document.getElementById("buscador");let a=0;const d={},c=Array.from(e.children).map(e=>({id:e.getAttribute("data-id"),precio:parseFloat(e.getAttribute("data-precio")),categoria:e.getAttribute("data-categoria"),elemento:e}));function i(e){return"$"+e.toFixed(2)}function r(){a=Object.values(d).reduce((e,t)=>e+t.precio*t.cantidad,0),n.textContent=i(a)}function l(){t.innerHTML="",Object.entries(d).forEach(([e,n])=>{const o=n.precio*n.cantidad,a=document.createElement("div");a.classList.add("ventas-producto-row");const d=document.createElement("span");d.classList.add("producto-nombre"),d.textContent=n.nombre;const c=document.createElement("span");c.classList.add("producto-cantidad"),c.textContent=n.cantidad;const r=document.createElement("span");r.classList.add("producto-precio"),r.textContent=i(n.precio);const l=document.createElement("span");l.classList.add("producto-subtotal"),l.textContent=i(o),a.appendChild(d),a.appendChild(c),a.appendChild(r),a.appendChild(l);const s=document.createElement("button");s.classList.add("boton-eliminar"),s.setAttribute("data-id",e),s.textContent="Eliminar",a.appendChild(s),t.appendChild(a)}),document.querySelectorAll(".boton-eliminar").forEach(e=>{e.addEventListener("click",(function(){!function(e){delete d[e],l(),r()}(this.getAttribute("data-id"))}))})}o.addEventListener("input",(function(){const t=o.value.toLowerCase();!function(t){e.innerHTML="",0!==t.length?t.forEach(t=>{e.appendChild(t.elemento)}):e.innerHTML="<div>No se encontraron productos.</div>"}(c.filter(e=>e.elemento.querySelector(".producto-imagen").alt.toLowerCase().includes(t)))})),e.addEventListener("click",(function(e){const t=e.target.closest(".ventas-producto");if(!t)return;const n=t.getAttribute("data-id"),o=t.querySelector(".producto-imagen").alt,a=parseFloat(t.getAttribute("data-precio"));d[n]?d[n].cantidad+=1:d[n]={nombre:o,precio:a,cantidad:1},l(),r()})),document.querySelector(".boton-limpiar").addEventListener("click",(function(){Object.keys(d).forEach(e=>delete d[e]),t.innerHTML="",a=0,n.textContent=i(a)})),document.querySelector(".boton-vender").addEventListener("click",(function(){const e=document.getElementById("cliente").value;if(!e||0===Object.keys(d).length)return void Swal.fire({icon:"warning",title:"Advertencia",text:"Selecciona un cliente y productos para vender.",confirmButtonText:"Aceptar",customClass:{popup:"mi-alerta-personalizada"}});const t={clienteID:e,productos:d,total:a};fetch("/admin/ventas/vender",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{Swal.fire({icon:"success",title:"¡Éxito!",text:e.mensaje,confirmButtonText:"Aceptar",customClass:{popup:"mi-alerta-personalizada"}}),Object.keys(d).forEach(e=>delete d[e]),l(),r()}).catch(e=>{Swal.fire({icon:"error",title:"Error",text:"Error: "+e.message,confirmButtonText:"Aceptar",customClass:{popup:"mi-alerta-personalizada"}})})}));document.querySelectorAll(".ventas-categoria").forEach(t=>{t.addEventListener("click",(function(){const t=this.getAttribute("data-id");"todos"===t?(e.innerHTML="",c.forEach(t=>e.appendChild(t.elemento))):function(t){e.innerHTML="";const n=c.filter(e=>e.categoria==t);if(0===n.length)return void(e.innerHTML="<div>No hay productos en esta categoría.</div>");n.forEach(t=>{e.appendChild(t.elemento)})}(t)}))})}));
//# sourceMappingURL=bundle.js.map
